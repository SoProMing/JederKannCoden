<div id="csharp-intro-quiz" style="font-family: system-ui, sans-serif; max-width: 780px; line-height: 1.4;">

  <h2 style="margin: 0.2rem 0 0.6rem;">C# Einführung – Mini-Quiz</h2>
  <p style="margin: 0 0 1rem;">10 Fragen zu Basics: Syntax, Datentypen, Properties, Zugriff, Arrays/Listen, Entry-Point, Exceptions, async/await.</p>

  <div id="quiz-card" style="border:1px solid #ddd;border-radius:12px;padding:16px;box-shadow:0 2px 8px rgba(0,0,0,.04);">
    <div id="progress" style="font-size:14px;color:#555;margin-bottom:8px;"></div>
    <div id="question" style="font-size:18px;font-weight:600;margin:8px 0 12px;"></div>
    <div id="choices" style="display:grid;gap:8px;"></div>
    <div id="feedback" style="margin-top:12px;min-height:24px;"></div>
    <div style="display:flex;gap:8px;margin-top:16px;">
      <button id="skipBtn" style="padding:8px 12px;border:1px solid #999;border-radius:8px;background:#f7f7f7;cursor:pointer;">Überspringen</button>
      <button id="nextBtn" style="padding:8px 12px;border:1px solid #0b5;border-radius:8px;background:#0b5;color:white;cursor:pointer;">Weiter</button>
      <button id="restartBtn" style="padding:8px 12px;border:1px solid #555;border-radius:8px;background:white;cursor:pointer;display:none;">Nochmal</button>
      <div style="margin-left:auto;align-self:center;font-size:13px;color:#666;">Tipp: Antworten anklicken</div>
    </div>
  </div>

  <div id="result" style="display:none;margin-top:16px;border:1px solid #ddd;border-radius:12px;padding:16px;">
    <h3 style="margin-top:0;">Auswertung</h3>
    <p id="score"></p>
    <details><summary style="cursor:pointer;">Erklärungen anzeigen</summary><ol id="review"></ol></details>
  </div>
</div>

<script>
(function(){
  const $ = s => document.querySelector(s);

  const QUESTIONS = [
    {
      q: 'Welche Anweisung schreibt eine Zeile auf die Konsole?',
      choices: [
        'Console.ReadLine("Hallo");',
        'Console.WriteLine("Hallo");',
        'System.Out("Hallo");',
        'print("Hallo");'
      ],
      correct: 1,
      explain: 'Console.WriteLine(...) gibt Text auf der Standardausgabe aus.'
    },
    {
      q: 'Welche der folgenden Bezeichner ist ohne Sonderbehandlung (@) ein gültiger C#-Bezeichner?',
      choices: [
        'class',
        '2name',
        '_name',
        'first-name'
      ],
      correct: 2,
      explain: 'Bezeichner dürfen nicht mit Ziffern beginnen und keine Bindestriche enthalten; Schlüsselwörter wie "class" sind reserviert.'
    },
    {
      q: 'Welche Aussage zu Wert- und Referenztypen ist korrekt?',
      choices: [
        'string ist ein Werttyp, int ist ein Referenztyp.',
        'int und bool sind Referenztypen.',
        'int ist ein Werttyp, string ist ein Referenztyp (immutable).',
        'Alle Typen sind Referenztypen.'
      ],
      correct: 2,
      explain: 'int/bool sind Werttypen (stack-basiert); string ist ein Referenztyp und unveränderlich.'
    },
    {
      q: 'Welche Deklaration ist eine Auto-Property?',
      choices: [
        'public int Age;',
        'public int Age { get; set; }',
        'public int GetAge() => age;',
        'int Age() { return 0; }'
      ],
      correct: 1,
      explain: 'Auto-Properties kapseln Feld + Getter/Setter: public int Age { get; set; }.'
    },
    {
      q: 'Welcher Zugriffsmodifizierer ist standardmäßig für Klassenmember (z. B. Felder) innerhalb einer Klasse, wenn keiner angegeben wird?',
      choices: [
        'public',
        'internal',
        'private',
        'protected'
      ],
      correct: 2,
      explain: 'Mitglieds-Standard in Klassen ist private. (Bei Top-Level-Typen ist es internal.)'
    },
    {
      q: 'Welche String-Interpolation ist korrekt?',
      choices: [
        '"Name: {name}"',
        '$"Name: {name}"',
        '$( "Name: {name}" )',
        'string.Format("Name: {name}")'
      ],
      correct: 1,
      explain: 'C#-Interpolation: $ vor dem String, Platzhalter in { }.'
    },
    {
      q: 'Wie erzeugt man ein int-Array mit drei Elementen (Standardwerte 0)?',
      choices: [
        'int[] a = new int(3);',
        'var a = int[3];',
        'int[] a = new int[3];',
        'array<int> a = 3;'
      ],
      correct: 2,
      explain: 'Arrays werden mit new int[3] angelegt; Indizes 0..2.'
    },
    {
      q: 'Welche Signatur ist ein klassischer (nicht top-level) Einstiegspunkt?',
      choices: [
        'public void Main()',
        'static void Main(string[] args)',
        'async void Main()',
        'int Main()'
      ],
      correct: 1,
      explain: 'Klassisch: static void Main(string[] args). (Moderne C#-Versionen erlauben Top-Level-Statements.)'
    },
    {
      q: 'Welche Struktur fängt Ausnahmen korrekt ab?',
      choices: [
        'try { … } finally { … } catch (Exception ex) { … }',
        'catch (Exception ex) { … } try { … } finally { … }',
        'try { … } catch (Exception ex) { … } finally { … }',
        'finally { … } try { … } catch (Exception ex) { … }'
      ],
      correct: 2,
      explain: 'Reihenfolge: try → catch → finally (optional).'
    },
    {
      q: 'Was bewirkt <code>await Task.Delay(1000);</code> typischerweise?',
      choices: [
        'Blockiert den Thread für 1 Sekunde.',
        'Wartet asynchron ca. 1 Sekunde, ohne den Thread zu blockieren.',
        'Startet einen neuen Prozess.',
        'Kompiliert den Code neu.'
      ],
      correct: 1,
      explain: 'await wartet asynchron, der aufrufende Thread bleibt i. d. R. frei.'
    }
  ];

  function shuffle(a){const arr=a.slice();for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}
  const state = { order: shuffle([...Array(QUESTIONS.length).keys()]), i: 0, correct: 0, answers: [] };

  const qEl = $("#question"), cEl = $("#choices"), fEl = $("#feedback"), pEl = $("#progress");
  const next = $("#nextBtn"), skip = $("#skipBtn"), restart = $("#restartBtn");
  const resultBox = $("#result"), score = $("#score"), review = $("#review");

  function render(){
    const qi = state.order[state.i], item = QUESTIONS[qi];
    pEl.textContent = `Frage ${state.i+1}/${QUESTIONS.length}`;
    qEl.innerHTML = item.q; cEl.innerHTML = ""; fEl.innerHTML = "";
    item.choices.forEach((c,idx)=>{
      const b = document.createElement("button");
      b.innerHTML = c;
      Object.assign(b.style,{padding:"10px 12px",border:"1px solid #ccc",borderRadius:"8px",background:"white",textAlign:"left"});
      b.onclick = () => answer(idx);
      cEl.appendChild(b);
    });
  }

  function answer(chosen){
    const qi = state.order[state.i], item = QUESTIONS[qi];
    const good = chosen === item.correct;
    state.answers[qi] = { chosen, good };
    if (good) state.correct++;

    [...cEl.children].forEach((b,i)=>{
      b.disabled = true;
      if (i === item.correct){ b.style.borderColor="#0b5"; b.style.background="rgba(0,180,80,.08)"; }
      if (i === chosen && !good){ b.style.borderColor="#b00"; b.style.background="rgba(200,0,0,.06)"; }
    });

    fEl.innerHTML = (good ? "✔️ Richtig" : "✖️ Falsch") + " — " + item.explain;
  }

  function nextQ(){
    if (state.i < QUESTIONS.length - 1){ state.i++; render(); }
    else { showResult(); }
  }

  function skipQ(){
    if (state.i < QUESTIONS.length - 1){ state.i++; render(); }
    else { showResult(); }
  }

  function showResult(){
    $("#quiz-card").style.display = "none";
    resultBox.style.display = "";
    const percent = Math.round(state.correct / QUESTIONS.length * 100);
    score.textContent = `${state.correct} von ${QUESTIONS.length} korrekt (${percent}%)`;
    review.innerHTML = "";
    state.order.forEach(qi=>{
      const it = QUESTIONS[qi], a = state.answers[qi];
      const li = document.createElement("li");
      const chosen = a ? it.choices[a.chosen] : "—";
      li.innerHTML = `<strong>${it.q}</strong><br>Deine Antwort: ${chosen}<br>Korrekt: ${it.choices[it.correct]}<br><span style="color:#555">${it.explain}</span>`;
      review.appendChild(li);
    });
    restart.style.display = "";
  }

  restart.onclick = () => {
    state.i = 0; state.correct = 0;
    state.order = shuffle([...Array(QUESTIONS.length).keys()]);
    $("#quiz-card").style.display = ""; resultBox.style.display = "none";
    render();
  };
  $("#nextBtn").onclick = nextQ;
  $("#skipBtn").onclick = skipQ;

  render();
})();
</script>
